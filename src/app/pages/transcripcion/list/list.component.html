<div class="row" accent="danger" size="tiny" [nbSpinner]="submitted" nbSpinnerStatus="info" nbSpinnerSize="large" nbSpinnerMessage="Obteniendo listado de transcripciones...">
  <div class="col-md-12 p-0">
    
    <nb-flip-card [showToggleButton]="false" [flipped]="flipped">

      <nb-card-front>
        <nb-card>
          <nb-card-header>
            <div class="row m-0 p-0">
              <div class="col text-left">
                <button type="button" class="btn btn-link text-info cursor-pointer">
                  <!-- <i class="fas fa-arrow-left"></i>&nbsp;{{ 'Regresar' | titlecase }} -->
                </button>
              </div>
              <div class="col text-center">
                <h3 style="margin-top: 6px; font-family: 'exo'; font-weight: 500;">Historico de transcripciones</h3>
              </div>
              <div class="col text-right">
                <!-- <button type="button" class="btn btn-link text-info cursor-pointer">
                  {{ 'Ver graficos' | titlecase }}&nbsp;
                  <i class="fas fa-chart-line"></i>
                </button> -->
              </div>
            </div>
          </nb-card-header>
          <nb-card-body>
            <!-- <h3>
              {{ DATA_LANG?.lblTitle?.text }}
              <span [nbTooltip]="DATA_LANG_GENERAL?.lblHelpTooltip?.text" (click)="showModalHelp(DATA_LANG?.nameModule.text, '', DATA_LANG?.mdlHelpTitle?.text , DATA_LANG?.mdlHelpTitleDescription?.text)">
                  <i class="far fa-question-circle cursor-pointer text-end text-primary icon-help-title"></i>
              </span>
          </h3> -->
            <p>
              En el historico de incapacidades radicadas, podra ver un listado de incapacidades radicadas y su estado de tramite
            </p>
            <div class="mb-3 text-right">
                <button 
                    nbTooltip="Radicar nueva incapacidad"
                    nbButton 
                    status="primary" 
                    (click)="fnGoToAddNewTranscription(null)"
                    >
                    <i class="fas fa-plus-circle cursor-pointer"></i>&nbsp;
                    Radicar nueva incapacidad
                </button>
                <!-- &nbsp;
                <button 
                    nbButton 
                    nbTooltip="test 2" 
                    class="btn-delete-all">
                    <i class="fas fa-trash-alt cursor-pointer"></i>
                </button> -->
            </div>
            <div class="row">
              <table class="table table-striped table-bordered table-hover" style="margin: 0 15px;">
                <thead>
                  <tr>
                    <th class="text-truncate" style="max-width: 256px;">
                        C&oacute;digo Unico de Incapacidad&nbsp;
                        <span nbTooltip="Ayuda" placement="top" container="body" class="float-right">
                            <i class="far fa-question-circle cursor-pointer text-end text-primary"></i>
                        </span>
                        <!-- <span nbTooltip="{{ (typeSort[0]['state'] == 'DEFAULT') ? DATA_LANG_GENERAL?.lblHelpTooltipTableSortDefault.text : (typeSort[0]['state'] == 'DESC') ? DATA_LANG_GENERAL?.lblHelpTooltipTableSortDesc.text : DATA_LANG_GENERAL?.lblHelpTooltipTableSortAsc.text }}" class="float-right" (click)="fnOrderList('name', collectionData, typeSort, 0)">
                            <i class="fas cursor-pointer text-end" [ngClass]="{'fa-sort': typeSort[0]['state'] == 'DEFAULT', 'fa-sort-up': typeSort[0]['state'] == 'ASC', 'fa-sort-down': typeSort[0]['state'] == 'DESC'}"></i>
                        </span> -->
                    </th>
                    <th class="text-truncate" style="max-width: 140px;">
                        Fecha emisi&oacute;n&nbsp;
                        <span nbTooltip="Ayuda" placement="top" container="body" class="float-right">
                            <i class="far fa-question-circle cursor-pointer text-end text-primary"></i>
                        </span>
                        <!-- <span nbTooltip="{{ (typeSort[0]['state'] == 'DEFAULT') ? DATA_LANG_GENERAL?.lblHelpTooltipTableSortDefault.text : (typeSort[0]['state'] == 'DESC') ? DATA_LANG_GENERAL?.lblHelpTooltipTableSortDesc.text : DATA_LANG_GENERAL?.lblHelpTooltipTableSortAsc.text }}" class="float-right" (click)="fnOrderList('name', collectionData, typeSort, 0)">
                            <i class="fas cursor-pointer text-end" [ngClass]="{'fa-sort': typeSort[0]['state'] == 'DEFAULT', 'fa-sort-up': typeSort[0]['state'] == 'ASC', 'fa-sort-down': typeSort[0]['state'] == 'DESC'}"></i>
                        </span> -->
                    </th>
                    <th class="text-truncate" style="max-width: 140px;">
                        Fecha inicio&nbsp;
                        <span nbTooltip="Ayuda" placement="top" container="body" class="float-right">
                            <i class="far fa-question-circle cursor-pointer text-end text-primary"></i>
                        </span>
                        <!-- <span nbTooltip="{{ (typeSort[0]['state'] == 'DEFAULT') ? DATA_LANG_GENERAL?.lblHelpTooltipTableSortDefault.text : (typeSort[0]['state'] == 'DESC') ? DATA_LANG_GENERAL?.lblHelpTooltipTableSortDesc.text : DATA_LANG_GENERAL?.lblHelpTooltipTableSortAsc.text }}" class="float-right" (click)="fnOrderList('name', collectionData, typeSort, 0)">
                            <i class="fas cursor-pointer text-end" [ngClass]="{'fa-sort': typeSort[0]['state'] == 'DEFAULT', 'fa-sort-up': typeSort[0]['state'] == 'ASC', 'fa-sort-down': typeSort[0]['state'] == 'DESC'}"></i>
                        </span> -->
                    </th>
                    <th class="text-truncate" style="max-width: 140px;">
                        Fecha fin&nbsp;
                        <span nbTooltip="Ayuda" placement="top" container="body" class="float-right">
                            <i class="far fa-question-circle cursor-pointer text-end text-primary"></i>
                        </span>
                        <!-- <span nbTooltip="{{ (typeSort[0]['state'] == 'DEFAULT') ? DATA_LANG_GENERAL?.lblHelpTooltipTableSortDefault.text : (typeSort[0]['state'] == 'DESC') ? DATA_LANG_GENERAL?.lblHelpTooltipTableSortDesc.text : DATA_LANG_GENERAL?.lblHelpTooltipTableSortAsc.text }}" class="float-right" (click)="fnOrderList('name', collectionData, typeSort, 0)">
                            <i class="fas cursor-pointer text-end" [ngClass]="{'fa-sort': typeSort[0]['state'] == 'DEFAULT', 'fa-sort-up': typeSort[0]['state'] == 'ASC', 'fa-sort-down': typeSort[0]['state'] == 'DESC'}"></i>
                        </span> -->
                    </th>
                    <th class="text-truncate" style="max-width: 140px;">
                        Diagn&oacute;stico&nbsp;
                        <span nbTooltip="Ayuda" placement="top" container="body" class="float-right">
                            <i class="far fa-question-circle cursor-pointer text-end text-primary"></i>
                        </span>
                        <!-- <span nbTooltip="{{ (typeSort[0]['state'] == 'DEFAULT') ? DATA_LANG_GENERAL?.lblHelpTooltipTableSortDefault.text : (typeSort[0]['state'] == 'DESC') ? DATA_LANG_GENERAL?.lblHelpTooltipTableSortDesc.text : DATA_LANG_GENERAL?.lblHelpTooltipTableSortAsc.text }}" class="float-right" (click)="fnOrderList('name', collectionData, typeSort, 0)">
                            <i class="fas cursor-pointer text-end" [ngClass]="{'fa-sort': typeSort[0]['state'] == 'DEFAULT', 'fa-sort-up': typeSort[0]['state'] == 'ASC', 'fa-sort-down': typeSort[0]['state'] == 'DESC'}"></i>
                        </span> -->
                    </th>
                    <th class="text-truncate" style="max-width: 155px;">
                        D&iacute;as otorgados&nbsp;
                        <span nbTooltip="Ayuda" placement="top" container="body" class="float-right">
                            <i class="far fa-question-circle cursor-pointer text-end text-primary"></i>
                        </span>
                        <!-- <span nbTooltip="{{ (typeSort[0]['state'] == 'DEFAULT') ? DATA_LANG_GENERAL?.lblHelpTooltipTableSortDefault.text : (typeSort[0]['state'] == 'DESC') ? DATA_LANG_GENERAL?.lblHelpTooltipTableSortDesc.text : DATA_LANG_GENERAL?.lblHelpTooltipTableSortAsc.text }}" class="float-right" (click)="fnOrderList('name', collectionData, typeSort, 0)">
                            <i class="fas cursor-pointer text-end" [ngClass]="{'fa-sort': typeSort[0]['state'] == 'DEFAULT', 'fa-sort-up': typeSort[0]['state'] == 'ASC', 'fa-sort-down': typeSort[0]['state'] == 'DESC'}"></i>
                        </span> -->
                    </th>
                    <th class="text-truncate" style="max-width: 155px;" *ngIf="false">
                        D&iacute;as acumulados&nbsp;
                        <span nbTooltip="Ayuda" placement="top" container="body" class="float-right">
                            <i class="far fa-question-circle cursor-pointer text-end text-primary"></i>
                        </span>
                        <!-- <span nbTooltip="{{ (typeSort[0]['state'] == 'DEFAULT') ? DATA_LANG_GENERAL?.lblHelpTooltipTableSortDefault.text : (typeSort[0]['state'] == 'DESC') ? DATA_LANG_GENERAL?.lblHelpTooltipTableSortDesc.text : DATA_LANG_GENERAL?.lblHelpTooltipTableSortAsc.text }}" class="float-right" (click)="fnOrderList('name', collectionData, typeSort, 0)">
                            <i class="fas cursor-pointer text-end" [ngClass]="{'fa-sort': typeSort[0]['state'] == 'DEFAULT', 'fa-sort-up': typeSort[0]['state'] == 'ASC', 'fa-sort-down': typeSort[0]['state'] == 'DESC'}"></i>
                        </span> -->
                    </th>
                    <th class="text-truncate" style="max-width: 235px;" *ngIf="false">
                        <!-- Descripci&oacute;n sintomatol&oacute;gica&nbsp; -->
                        Valor incapacidad
                        <span nbTooltip="Ayuda" placement="top" container="body" class="float-right">
                            <i class="far fa-question-circle cursor-pointer text-end text-primary"></i>
                        </span>
                        <!-- <span nbTooltip="{{ (typeSort[0]['state'] == 'DEFAULT') ? DATA_LANG_GENERAL?.lblHelpTooltipTableSortDefault.text : (typeSort[0]['state'] == 'DESC') ? DATA_LANG_GENERAL?.lblHelpTooltipTableSortDesc.text : DATA_LANG_GENERAL?.lblHelpTooltipTableSortAsc.text }}" class="float-right" (click)="fnOrderList('name', collectionData, typeSort, 0)">
                            <i class="fas cursor-pointer text-end" [ngClass]="{'fa-sort': typeSort[0]['state'] == 'DEFAULT', 'fa-sort-up': typeSort[0]['state'] == 'ASC', 'fa-sort-down': typeSort[0]['state'] == 'DESC'}"></i>
                        </span> -->
                    </th>
                    <th h class="text-truncate" style="max-width: 100px;" *ngIf="false">
                        Prorroga&nbsp;
                        <span nbTooltip="Ayuda" placement="top" container="body" class="float-right">
                            <i class="far fa-question-circle cursor-pointer text-end text-primary"></i>
                        </span>
                        <!-- <span nbTooltip="{{ (typeSort[0]['state'] == 'DEFAULT') ? DATA_LANG_GENERAL?.lblHelpTooltipTableSortDefault.text : (typeSort[0]['state'] == 'DESC') ? DATA_LANG_GENERAL?.lblHelpTooltipTableSortDesc.text : DATA_LANG_GENERAL?.lblHelpTooltipTableSortAsc.text }}" class="float-right" (click)="fnOrderList('name', collectionData, typeSort, 0)">
                            <i class="fas cursor-pointer text-end" [ngClass]="{'fa-sort': typeSort[0]['state'] == 'DEFAULT', 'fa-sort-up': typeSort[0]['state'] == 'ASC', 'fa-sort-down': typeSort[0]['state'] == 'DESC'}"></i>
                        </span> -->
                    </th>
                    
                    <th class="thead-column-action text-center">
                        Estado&nbsp;
                        <span nbTooltip="Ayuda" placement="top" container="body" class="float-right">
                            <i class="far fa-question-circle cursor-pointer text-end text-primary icon-help-thead"></i>
                        </span>
                    </th>
                    <th class="thead-column-action text-center">
                        <span nbTooltip="Ayuda" placement="top" container="body" class="float-right">
                            <i class="far fa-question-circle cursor-pointer text-end text-primary icon-help-thead"></i>
                        </span>
                    </th>
                    <th class="thead-column-action text-center" *ngIf="false">
                        <span nbTooltip="Ayuda" placement="top" container="body" class="float-right">
                            <i class="far fa-question-circle cursor-pointer text-end text-primary icon-help-thead"></i>
                        </span>
                    </th>
                    <!-- <th class="thead-column-action">
                        <span>
                            <i class="far fa-question-circle cursor-pointer text-end text-primary icon-help-thead"></i>
                        </span>
                    </th> -->
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of dataCollection | paginate: { itemsPerPage: itemsPerPage, currentPage: currentPage }; let i = index;">
                    <td class="align-middle text-center"><small style="font-size: 12px;">{{ item?.uiCodigoDiagnostico }}</small></td>
                    <td class="align-middle text-center">{{ item?.dtFechaEmisionIncapacidad | date: 'dd/MM/yyyy' }}</td>
                    <td class="align-middle text-center">{{ item?.dtFechaCreacion | date: 'dd/MM/yyyy' }}</td>
                    <td class="align-middle text-center">{{ item?.dtFechaFin | date: 'dd/MM/yyyy' }}</td>
                    <td class="align-middle text-left"><strong style="font-size: 12px;">{{ item?.tCIE10 }}</strong> - <small style="font-size: 12px;">{{ item?.tDescripcion }}</small></td>
                    <td class="align-middle text-center">{{ item?.iDiasIncapacidad }}</td>
                    <td class="align-middle text-center" *ngIf="false">{{ item?.iDiasAcumuladosPorroga }}</td>
                    <!-- <td class="align-middle text-left"><small style="font-size: 12px;">{{ item?.tDescripcionSintomatologica }}</small></td> -->
                    <td class="align-middle text-right" *ngIf="false">{{ (item?.valor) ? (item?.valor  | currency:'CAD':'symbol-narrow':'4.2-2') : '$0.00' }}</td>
                    <td class="align-middle text-center" *ngIf="false">
                      <span nbTooltip="Ayuda" placement="top" container="body" class="badge rounded-pill text-light" [ngClass]="{'badge-state-5': item?.bProrroga, 'badge-state-1': !item?.bProrroga}">
                        {{ (item?.bProrroga) ? 'Prorrogada' : 'Sin prorroga' }}
                      </span>
                    </td>
                    <td class="align-middle text-center">
                      <!-- <span (click)="fnViewDagnosticCertificate(item)" tooltip="Ver cambiar de estado" placement="top" container="body">
                          <i class="fas fa-file-export cursor-pointer text-info"></i>
                      </span> -->
                      <span class="badge rounded-pill" nbTooltip="{{ (item?.maxestado) ? 'Estado: ' + item?.estado : 'Sin estado' }}" placement="top" container="body" 
                      [ngClass]="{
                        'badge-state-0': !item?.maxestado, 
                        'badge-state-1': item?.maxestado == 1, 
                        'badge-state-2': item?.maxestado == 2, 
                        'badge-state-3': item?.maxestado == 3,
                        'badge-state-4': item?.maxestado == 4,
                        'badge-state-5': item?.maxestado == 5,
                        'badge-state-6': item?.maxestado == 6,
                        'badge-state-7': item?.maxestado == 7}">
                        {{ (item?.maxestado) ? item?.estado : 'Sin estado' }}
                      </span>
                    </td>
                    <td class="align-middle text-center">
                      <!-- <ng-template #popTemplate style="background-color: #000 !important;">Here we go: <div [innerHtml]="html"></div></ng-template> -->
                      <span (click)="fnViewDagnosticCertificate(item)" nbTooltip="Ver detalle incapacidad" placement="top" container="body">
                          <!-- <i class="fas fa-pencil-alt cursor-pointer text-warning"></i> -->
                          <i class="fas fa-eye cursor-pointer text-info"></i>
                      </span>
                    </td>
                    <td class="align-middle text-center" *ngIf="false">
                      <!-- <ng-template #popTemplate style="background-color: #000 !important;">Here we go: <div [innerHtml]="html"></div></ng-template> -->
                      <span (click)="fnViewAccountingRegistry(item)" tooltip="Ver registro contable" placement="top" container="body">
                          <!-- <i class="fas fa-pencil-alt cursor-pointer text-warning"></i> -->
                          <i class="fas fa-search-dollar cursor-pointer text-info"></i>
                      </span>
                    </td>
                    <!-- <td class="align-middle">
                      <span>
                          <i class="fas fa-trash-alt cursor-pointer text-danger"></i>
                      </span>
                    </td> -->
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="col-12 mt-2 mb-5">
              <div class="row justify-content-sm-between justify-content-md-between justify-content-lg-start justify-content-xl-start">
                <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6">
                  <div class="text-center kstdy-font_paginator" *ngIf="dataCollection?.length > 0">
                    <div class="text-left kstdy-font_paginator">
                      Mostrando {{ (((currentPage * itemsPerPage) - ((currentPage * itemsPerPage) / currentPage)) + 1 ) }} -
                      {{ ((currentPage * itemsPerPage) >= dataCollection.length) ? (dataCollection.length) + (((currentPage * itemsPerPage) - ((currentPage * itemsPerPage) / currentPage)) ) : (currentPage * itemsPerPage) }}
                      de {{ totalItems }}
                    </div>
                  </div>
                </div>
                <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6">
                  <div class="text-center kstdy-font_paginator">
                    <pagination-controls 
                      (pageChange)="currentPage = $event" 
                      previousLabel="Anterior"
                      nextLabel="Siguiente">
                    </pagination-controls>
                  </div>
                </div>
                <!-- <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4">
                  <div class="text-center">
                    
                  </div>
                </div> -->
              </div>
            </div>
          </nb-card-body>
        </nb-card>
      </nb-card-front>

      <nb-card-back>
        <nb-card>
          <nb-card-header>
            <h5>Hola</h5>
          </nb-card-header>
          <nb-card-body>
            <h1>Hola</h1>
          </nb-card-body>
        </nb-card>
      </nb-card-back>

    </nb-flip-card>

  </div>
</div>