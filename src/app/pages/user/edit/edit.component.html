<nb-card *ngIf="true">
  <nb-card-header>
    <div class="row m-0 p-0">
      <div class="col text-left">
        <button type="button" (click)="fnReturnPage()" class="btn btn-link text-info cursor-pointer">
          <i class="fas fa-arrow-left"></i>&nbsp;{{ 'Regresar' | titlecase }}
        </button>
      </div>
      <div class="col-6 text-center">
        <h5 style="margin-top: 6px;">{{ DATA_LANG?.mdlEditTitle?.text }}</h5>
      </div>
      <div class="col text-right">
        &nbsp;
      </div>
    </div> 
  </nb-card-header>
  <nb-card-body>
        <div class="row ml-0 mr-0">
            
            <form (ngSubmit)="editUser()" #form="ngForm" aria-labelledby="title">

                <div class="row">
                  <div class="col-6 mb-2">
                    <div class="form-control-group">
                      <label class="label" for="input-firstName">Primer nombre:</label>
                      <input nbInput
                        [(ngModel)]="user.firstName"
                        #firstName="ngModel"
                        id="input-firstName"
                        name="firstName"
                        placeholder="Ingrese primer nombre"
                        autofocus
                        fullWidth
                        style="height: 55px;"
                        [status]="firstName.dirty ? (firstName.invalid  ? 'danger' : 'success') : ''"
                        [required]="true"
                        [minlength]="3"
                        [maxlength]="50"
                        [attr.aria-invalid]="firstName.invalid && firstName.touched ? true : null">
                      <ng-container *ngIf="firstName.invalid && firstName.touched">
                        <p class="error-message" *ngIf="firstName.errors?.required">
                          N&uacute;mero de documento is required!
                        </p>
                        <p class="error-message" *ngIf="firstName.errors?.minlength || firstName.errors?.maxlength">
                          N&uacute;mero de documento should contains
                          from {{getConfigValue('forms.validation.firstName.minLength')}}
                          to {{getConfigValue('forms.validation.firstName.maxLength')}}
                          characters
                        </p>
                      </ng-container>
                    </div>
                  </div>
                  <div class="col-6 mb-2">
                    <div class="form-control-group">
                      <label class="label" for="input-secondFirstName">Segundo nombre:</label>
                      <input nbInput
                        [(ngModel)]="user.secondFirstName"
                        #secondFirstName="ngModel"
                        id="input-secondFirstName"
                        name="secondFirstName"
                        placeholder="Ingrese segundo nombre"
                        autofocus
                        fullWidth
                        style="height: 55px;"
                        [status]="secondFirstName.dirty ? (secondFirstName.invalid  ? 'danger' : 'success') : ''"
                        [required]="false"
                        [minlength]="3"
                        [maxlength]="50"
                        [attr.aria-invalid]="secondFirstName.invalid && secondFirstName.touched ? true : null">
                      <ng-container *ngIf="secondFirstName.invalid && secondFirstName.touched">
                        <p class="error-message" *ngIf="secondFirstName.errors?.required">
                          N&uacute;mero de documento is required!
                        </p>
                        <p class="error-message" *ngIf="secondFirstName.errors?.minlength || secondFirstName.errors?.maxlength">
                          N&uacute;mero de documento should contains
                          from {{getConfigValue('forms.validation.secondFirstName.minLength')}}
                          to {{getConfigValue('forms.validation.secondFirstName.maxLength')}}
                          characters
                        </p>
                      </ng-container>
                    </div>
                  </div>
                  <div class="col-6 mb-2">
                    <div class="form-control-group">
                      <label class="label" for="input-lastName">Primer apellido:</label>
                      <input nbInput
                        [(ngModel)]="user.lastName"
                        #lastName="ngModel"
                        id="input-lastName"
                        name="lastName"
                        placeholder="Ingrese primer nombre"
                        autofocus
                        fullWidth
                        style="height: 55px;"
                        [status]="lastName.dirty ? (lastName.invalid  ? 'danger' : 'success') : ''"
                        [required]="true"
                        [minlength]="3"
                        [maxlength]="50"
                        [attr.aria-invalid]="lastName.invalid && lastName.touched ? true : null">
                      <ng-container *ngIf="lastName.invalid && lastName.touched">
                        <p class="error-message" *ngIf="lastName.errors?.required">
                          N&uacute;mero de documento is required!
                        </p>
                        <p class="error-message" *ngIf="lastName.errors?.minlength || lastName.errors?.maxlength">
                          N&uacute;mero de documento should contains
                          from {{getConfigValue('forms.validation.lastName.minLength')}}
                          to {{getConfigValue('forms.validation.lastName.maxLength')}}
                          characters
                        </p>
                      </ng-container>
                    </div>
                  </div>
                  <div class="col-6 mb-2">
                    <div class="form-control-group">
                      <label class="label" for="input-secondLastName">Segundo apellido:</label>
                      <input nbInput
                        [(ngModel)]="user.secondLastName"
                        #secondLastName="ngModel"
                        id="input-secondLastName"
                        name="secondLastName"
                        placeholder="Ingrese primer nombre"
                        autofocus
                        fullWidth
                        style="height: 55px;"
                        [status]="secondLastName.dirty ? (secondLastName.invalid  ? 'danger' : 'success') : ''"
                        [required]="false"
                        [minlength]="3"
                        [maxlength]="50"
                        [attr.aria-invalid]="secondLastName.invalid && secondLastName.touched ? true : null">
                      <ng-container *ngIf="secondLastName.invalid && secondLastName.touched">
                        <p class="error-message" *ngIf="secondLastName.errors?.required">
                          N&uacute;mero de documento is required!
                        </p>
                        <p class="error-message" *ngIf="secondLastName.errors?.minlength || secondLastName.errors?.maxlength">
                          N&uacute;mero de documento should contains
                          from {{getConfigValue('forms.validation.secondLastName.minLength')}}
                          to {{getConfigValue('forms.validation.secondLastName.maxLength')}}
                          characters
                        </p>
                      </ng-container>
                    </div>
                  </div>
                  <div class="col-6 mb-2">
                    <div class="form-control-group">
                      <label class="label" for="select-documentType">Tipo de documento:</label>
                      <ng-select
                        [items]="collectionDocumentTypesList"
                        bindLabel="name" 
                        bindValue="_id"
                        id="select-documentType"
                        name="documentType"
                        #documentType="ngModel"
                        placeholder="Seleccione tipo de documento"
                        [(ngModel)]="user.documentType"
                        (change)="fnSetDocumentType($event);"
                        required
                        [disabled]="false"
                        [clearable]="false">
                      </ng-select>
                    </div>
                  </div>
                  <div class="col-6 mb-2">
                    <div class="form-control-group">
                      <label class="label" for="input-documentNumber">N&uacute;mero de documento:</label>
                      <input nbInput
                        [(ngModel)]="user.documentNumber"
                        #documentNumber="ngModel"
                        id="input-documentNumber"
                        name="documentNumber"
                        placeholder="Ingrese número de identificación"
                        autofocus
                        fullWidth
                        style="height: 55px;"
                        [status]="documentNumber.dirty ? (documentNumber.invalid  ? 'danger' : 'success') : ''"
                        [required]="true"
                        [minlength]="5"
                        [maxlength]="20"
                        [attr.aria-invalid]="documentNumber.invalid && documentNumber.touched ? true : null">
                      <ng-container *ngIf="documentNumber.invalid && documentNumber.touched">
                        <p class="error-message" *ngIf="documentNumber.errors?.required">
                          N&uacute;mero de documento is required!
                        </p>
                        <p class="error-message" *ngIf="documentNumber.errors?.minlength || documentNumber.errors?.maxlength">
                          N&uacute;mero de documento should contains
                          from {{getConfigValue('forms.validation.documentNumber.minLength')}}
                          to {{getConfigValue('forms.validation.documentNumber.maxLength')}}
                          characters
                        </p>
                      </ng-container>
                    </div>
                  </div>
                  <div class="col-6 mb-3">
                    <div class="form-control-group">
                      <label class="label" for="date-documentDateExpedition">Fecha expedici&oacute;n:</label>
              
                      <input
                        nbInput
                        [(ngModel)]="user.documentDateExpedition"
                        #documentDateExpedition="ngModel"
                        id="date-documentDateExpedition"
                        name="documentDateExpedition"
                        placeholder="Seleccione fecha de expedición"
                        fullWidth
                        style="height: 55px;"
                        class="cursor-pointer"
                        fieldSize="large"
                        type="text"
                        [readonly]="true"
                        [disabled]="false"
                        [status]="documentDateExpedition.dirty ? (documentDateExpedition.invalid  ? 'danger' : 'basic') : 'basic'"
                        [ngModelOptions]="{standalone: true}"
                        bsDatepicker
                        [maxDate]="maxDate"
                        [bsConfig]="{ dateInputFormat: 'DD-MM-YYYY', containerClass: 'theme-blue' }"
                        [required]="true"
                        [attr.aria-invalid]="documentDateExpedition.invalid && documentDateExpedition.touched ? true : null">
                      <ng-container *ngIf="documentDateExpedition.invalid && documentDateExpedition.touched">
                        <p class="error-message" *ngIf="documentDateExpedition.errors?.required">
                          Fecha de expdici&oacute;n is required!
                        </p>
                      </ng-container>
              
                    </div>
                  </div>
                  <div class="col-6 mb-3">
                    <div class="form-control-group">
                      <label class="label" for="input-phoneNumber">N&uacute;mero de tel&eacute;fono:</label>
                      <input nbInput
                        [(ngModel)]="user.phoneNumber"
                        #phoneNumber="ngModel"
                        id="input-phoneNumber"
                        name="phoneNumber"
                        placeholder="Ingrese número de teléfono"
                        autofocus
                        fullWidth
                        style="height: 55px;"
                        [status]="phoneNumber.dirty ? (phoneNumber.invalid  ? 'danger' : 'success') : ''"
                        [required]="true"
                        [minlength]="5"
                        [maxlength]="15"
                        [attr.aria-invalid]="phoneNumber.invalid && phoneNumber.touched ? true : null">
                      <ng-container *ngIf="phoneNumber.invalid && phoneNumber.touched">
                        <p class="error-message" *ngIf="phoneNumber.errors?.required">
                          N&uacute;mero de tel&eacute;fono is required!
                        </p>
                        <p class="error-message" *ngIf="phoneNumber.errors?.minlength || phoneNumber.errors?.maxlength">
                          N&uacute;mero de tel&eacute;fono should contains
                          from {{getConfigValue('forms.validation.phoneNumber.minLength')}}
                          to {{getConfigValue('forms.validation.phoneNumber.maxLength')}}
                          characters
                        </p>
                      </ng-container>
                    </div>
                  </div>
                  <div class="col-12 mb-3">
                    <div class="form-control-group">
                      <label class="label" for="input-email">Correo electr&oacute;nico:</label>
                      <input nbInput
                        [(ngModel)]="user.email"
                        #email="ngModel"
                        id="input-email"
                        name="email"
                        pattern=".+@.+..+"
                        placeholder="Email address"
                        fullWidth
                        style="height: 55px;"
                        [status]="email.dirty ? (email.invalid  ? 'danger' : 'success') : ''"
                        [required]="true"
                        [attr.aria-invalid]="email.invalid && email.touched ? true : null">
                      <ng-container *ngIf="email.invalid && email.touched">
                        <p class="error-message" *ngIf="email.errors?.required">
                          Email is required!
                        </p>
                        <p class="error-message" *ngIf="email.errors?.pattern">
                          Email should be the real one!
                        </p>
                      </ng-container>
                    </div>
                  </div>
                  
                  <div class="col-6 mb-2">
                    <div class="form-control-group">
                      <label class="label" for="select-status">Estado:</label>
                      <ng-select
                        [items]="collectionStatesList"
                        bindLabel="name" 
                        bindValue="_id" 
                        id="select-status"
                        name="status"
                        #status="ngModel"
                        placeholder="Seleccione tipo de documento"
                        [(ngModel)]="user.state"
                        (change)="fnSetState($event);"
                        required
                        [disabled]="false"
                        [clearable]="false">
                      </ng-select>
                    </div>
                  </div>
                  <div class="col-6 mb-2">
                    <div class="form-control-group">
                      <label class="label" for="select-profile">Perfil:</label>
                      <ng-select
                        [items]="collectionProfiles"
                        bindLabel="name" 
                        bindValue="_id"
                        id="select-profile"
                        name="profile"
                        #profile="ngModel"
                        placeholder="Seleccione tipo de documento"
                        [(ngModel)]="user.profile"
                        (change)="fnSetProfile($event);"
                        required
                        [disabled]="false"
                        [clearable]="false">
                      </ng-select>
                    </div>
                  </div>
                  <div class="col-6 mb-3" *ngIf="false">
                    <div class="form-control-group">
                      <label class="label" for="input-password">Contrase&ntilde;a:</label>
                      <input nbInput
                            [(ngModel)]="user.password"
                            #password="ngModel"
                            type="password"
                            id="input-password"
                            name="password"
                            placeholder="Ingrese una contraseña"
                            fullWidth
                            style="height: 55px;"
                            [status]="email.dirty ? (email.invalid || password.value != rePass.value  ? 'danger' : 'success') : ''"
                            [required]="true"
                            [minlength]="8"
                            [maxlength]="16"
                            [attr.aria-invalid]="password.invalid && password.touched ? true : null">
                      <ng-container *ngIf="password.invalid && password.touched">
                        <p class="error-message" *ngIf="password.errors?.required">
                          La contrase&ntilde;a es obligatoria!
                          <!-- Password is required! -->
                        </p>
                        <p class="error-message" *ngIf="password.errors?.minlength || password.errors?.maxlength">
                          La contrase&ntilde;a deberia contener 
                          <!-- Password should contains -->
                          de {{ getConfigValue('forms.validation.password.minLength') }}
                          a {{ getConfigValue('forms.validation.password.maxLength') }}
                          <!-- characters -->
                          caracteres
                        </p>
                      </ng-container>
                    </div>
                  </div>
                  <div class="col-6 mb-3" *ngIf="false">
                    <div class="form-control-group">
                      <label class="label" for="input-re-password">Repetir contrase&ntilde;a:</label>
                      <input nbInput
                             [(ngModel)]="user.confirmPassword"
                             #rePass="ngModel"
                             type="password"
                             id="input-re-password"
                             name="rePass"
                             placeholder="Conrfimar la contraseña"
                             fullWidth
                             style="height: 55px;"
                             [status]="email.dirty ? (email.invalid || password.value != rePass.value  ? 'danger' : 'success') : ''"
                             [required]="true"
                             [attr.aria-invalid]="rePass.invalid && rePass.touched ? true : null">
                      <ng-container *ngIf="rePass.invalid && rePass.touched">
                        <p class="error-message" *ngIf="rePass.errors?.required">
                          <!-- Password confirmation is required! -->
                          Confirmaci&oacute;n de contrase&ntilde;a es obligatorio!
                        </p>
                        <p class="error-message" *ngIf="password.value != rePass.value && !rePass.errors?.required">
                          <!-- Password does not match the confirm password. -->
                          Las contrase&ntilde;s no coinciden
                        </p>
                      </ng-container>
                    </div>
                  </div>
                  <hr>
                  <div class="col-12 mt-4">
                    <button nbButton 
                      type="submit"
                      fullWidth
                      status="success" 
                      size="large" 
                      class="cursor-pointer"
                      [disabled]="
                        (submitted || !form.valid) || 
                        (user.firstName == '' || user.firstName == null) || 
                        (user.lastName== '' || user.lastName== null) || 
                        (user.email == '' || user.email == null) || 
                        (user.documentType == '' || user.documentType == null) || 
                        (user.documentNumber == '' || user.documentNumber == null) || 
                        (user.documentDateExpedition == '' || user.documentDateExpedition == null) || 
                        (user.state == '' || user.state == null) || 
                        (user.profile == '' || user.profile == null) || 
                        (user.phoneNumber == '' || user.phoneNumber == null)
                      "
                      [class.btn-pulse]="submitted">
                      Register
                    </button>
                  </div>
                  <div class="col-12 mt-3">
                    <button nbButton 
                      type="button"
                      fullWidth
                      status="info" 
                      size="large" 
                      (click)="fnCancelUpdate()"
                      class="cursor-pointer"
                      style="background-color: gray; border-color: gray; color: white; cursor: pointer;"
                      [disabled]="false"
                      [class.btn-pulse]="submitted">
                      Cancelar
                    </button>
                  </div>
                </div>


            </form>


        </div>
  </nb-card-body>
</nb-card>